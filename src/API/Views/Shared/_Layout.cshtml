@inject Microsoft.Extensions.Configuration.IConfiguration Configuration
<!DOCTYPE html>
<html lang="en-gb">
<head>
    @{
        string siteName = "Martin Costello's API";
        string description = ViewBag.MetaDescription ?? siteName;
        string image = ViewBag.MetaImage ?? string.Empty;
        string robots = ViewBag.MetaRobots ?? "INDEX";
        string title = ViewBag.Title + " - api.martincostello.com";
        string twitterHandle = "@martin_costello";

        string host = Context.Request.Host.ToString();
        string[] hostSplit = host.Split(':');

        UriBuilder builder = new UriBuilder();
        builder.Host = hostSplit[0];

        if (hostSplit.Length > 1)
        {
            builder.Port = int.Parse(hostSplit[1], CultureInfo.InvariantCulture);
        }

        builder.Path = Context.Request.Path;
        builder.Query = string.Empty;
        builder.Scheme = "https";

        string canonicalUri = builder.Uri.AbsoluteUri.ToLowerInvariant();

        if (!canonicalUri.EndsWith("/"))
        {
            canonicalUri += "/";
        }

        if (!string.IsNullOrEmpty(image))
        {
            builder.Path = image;
            image = builder.Uri.AbsoluteUri;
        }
    }
    <title>@title</title>
    <meta charset="utf-8" />
    <meta http-equiv="cache-control" content="no-cache, no-store" />
    <meta http-equiv="content-type" content="text/html;" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="author" content="Martin Costello" />
    <meta name="copyright" content="&copy; Martin Costello @DateTime.UtcNow.Date.Year" />
    <meta name="description" content="@description" />
    <meta name="language" content="en" />
    <meta name="keywords" content="martin,costello,api" />
    <meta name="robots" content="@robots" />
    <meta name="theme-color" content="#ffffff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1" />
    <meta property="fb:profile_id" content="10100867762061905" />
    <meta name="application-name" content="api.martincostello.com" />
    <meta name="msapplication-config" content="browserconfig.xml" />
    <meta name="msapplication-navbutton-color" content="#0095DA" />
    <meta name="msapplication-starturl" content="/" />
    <meta name="msapplication-TileColor" content="#2d89ef" />
    <meta name="msapplication-TileImage" content="@Url.Content("~/mstile-144x144.png")" asp-append-version="true" />
    <meta property="og:description" content="@description" />
    @if (!string.IsNullOrEmpty(image))
    {
        <meta property="og:image" content="@image" />
        <meta name="twitter:image" content="@image" />
    }
    <meta property="og:locale" content="en_GB" />
    <meta property="og:site_name" content="@siteName" />
    <meta property="og:title" content="@ViewBag.Title" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="@canonicalUri" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:creator" content="@twitterHandle" />
    <meta name="twitter:description" content="@description" />
    <meta name="twitter:domain" content="@builder.Host" />
    <meta name="twitter:site" content="@twitterHandle" />
    <meta name="twitter:title" content="@title" />
    <meta name="twitter:url" content="@canonicalUri" />
    <link rel="canonical" href="@canonicalUri" />
    <link rel="manifest" href="@Url.Content("~/manifest.json")" asp-append-version="true" />
    <link rel="sitemap" type="application/xml" href="@Url.Content("~/sitemap.xml")" asp-append-version="true" />
    <link rel="shortcut icon" type="image/x-icon" href="@Url.Content("~/favicon.ico")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="57x57" href="@Url.Content("~/apple-touch-icon-57x57.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="60x60" href="@Url.Content("~/apple-touch-icon-60x60.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="72x72" href="@Url.Content("~/apple-touch-icon-72x72.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="76x76" href="@Url.Content("~/apple-touch-icon-76x76.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="114x114" href="@Url.Content("~/apple-touch-icon-114x114.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="120x120" href="@Url.Content("~/apple-touch-icon-120x120.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="144x144" href="@Url.Content("~/apple-touch-icon-144x144.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="152x152" href="@Url.Content("~/apple-touch-icon-152x152.png")" asp-append-version="true" />
    <link rel="apple-touch-icon" sizes="180x180" href="@Url.Content("~/apple-touch-icon-180x180.png")" asp-append-version="true" />
    <link rel="icon" type="image/png" href="@Url.Content("~/android-chrome-192x192.png")" sizes="192x192" asp-append-version="true" />
    <link rel="icon" type="image/png" href="@Url.Content("~/favicon-32x32.png")" sizes="32x32" asp-append-version="true" />
    <link rel="icon" type="image/png" href="@Url.Content("~/favicon-96x96.png")" sizes="96x96" asp-append-version="true" />
    <link rel="icon" type="image/png" href="@Url.Content("~/favicon-16x16.png")" sizes="16x16" asp-append-version="true" />
    <link rel="prefetch" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
    <environment names="Development">
        <link rel="prefetch" href="~/lib/bootstrap/dist/css/bootstrap.css" asp-append-version="true" />
        <link rel="prefetch" href="~/css/site.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" asp-append-version="true" />
        <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    </environment>
    <environment names="Staging,Production">
        <link rel="prefetch" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/css/bootstrap.min.css"
              asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
              asp-fallback-test-class="sr-only"
              asp-fallback-test-property="position"
              asp-fallback-test-value="absolute" />
        <link rel="prefetch" href="~/css/site.min.css" asp-append-version="true" />
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/css/bootstrap.min.css"
              asp-fallback-href="~/lib/bootstrap/dist/css/bootstrap.min.css"
              asp-fallback-test-class="sr-only"
              asp-fallback-test-property="position"
              asp-fallback-test-value="absolute" />
        <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />
    </environment>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />
    @RenderSection("styles", required: false)
    <script type="text/javascript">
        if (self == top) {
            document.documentElement.className = document.documentElement.className.replace(/\bjs-flash\b/, '');
        }
        else {
            top.location = self.location;
        }
    </script>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @Html.ActionLink("api.martincostello.com", "Index", "Home", null, new { @class = "navbar-brand", id = "link-home" })
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a id="link-blog" href="https://blog.martincostello.com/" target="_blank">Blog</a></li>
                    <li><a id="link-about" href="https://martincostello.com/home/about/" target="_blank">About</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container body-content">
        @RenderBody()
        <hr />
        <footer>
            <p>&copy; Martin Costello @DateTime.UtcNow.Year | <a href="http://status.martincostello.com/" target="_blank">Site Status &amp; Uptime</a></p>
        </footer>
    </div>
    <environment names="Development">
        <script src="~/lib/jquery/dist/jquery.js"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
    </environment>
    <environment names="Staging,Production">
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.4.min.js"
                asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                asp-fallback-test="window.jQuery">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/bootstrap.min.js"
                asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal">
        </script>
        <script src="~/js/site.min.js" asp-append-version="true"></script>
    </environment>
    @RenderSection("scripts", required: false)
    @if (false)
    {
        <script type="text/javascript">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-42907618-6', 'auto');
            ga('send', 'pageview');
        </script>
    }
</body>
<!--
    Datacenter:      @Configuration["Azure:Datacenter"]
    Instance:        @Environment.GetEnvironmentVariable("COMPUTERNAME")
-->
</html>
